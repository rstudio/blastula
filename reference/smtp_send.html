<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Send an email message through SMTP — smtp_send • blastula</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet"><link href="../rmd.css" rel="stylesheet"><meta property="og:title" content="Send an email message through SMTP — smtp_send"><meta property="og:description" content="Send an email message to one or more recipients via an SMTP server. The email
message required as input to smtp_send() has to be created by using the
compose_email() function. The email_message object can be previewed by
printing the object, where the HTML preview will show how the message should
appear in recipients' email clients. File attachments can be added to the
email object by using the add_attachment() function (one call per
attachment) prior to sending through this function."><meta property="og:image" content="https://rstudio.github.io/blastula/reference/figures/logo.png"><meta property="og:image:alt" content="blastula package"><meta name="twitter:card" content="summary"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script><!-- javascript assets for rmarkdown --><script src="../ace-1.2.3/ace.js" type="text/javascript" charset="utf-8"></script><script src="../holder-2.9.0/holder.min.js" type="text/javascript" charset="utf-8"></script><script src="../snippets/snippets.js" type="text/javascript" charset="utf-8"></script></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">blastula</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.5.9000</span>
      </span>

      <!--<div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">blastula</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of  <a href=""></a></span>
          <span class="version version-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.5.9000</span>
        </div>
      </div>-->
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/blastula.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Examples

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://solutions.rstudio.com/r/blastula/" class="external-link">Custom Emails with R Markdown and Blastula</a>
    </li>
    <li>
      <a href="https://solutions.rstudio.com/r/blastula/conditional-example/" class="external-link">Customized Conditional Emails with Posit Connect</a>
    </li>
    <li>
      <a href="https://solutions.rstudio.com/data-science-admin/scheduling/" class="external-link">Scheduling Data Science Tasks</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/sending_using_smtp.html">Sending Email Using SMTP</a>
    </li>
  </ul></li>
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../news/index.html">Changelog</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://blog.rstudio.com/2019/12/05/emails-from-r-blastula-0-3/" class="external-link">Version 0.3</a>
    </li>
  </ul></li>
<li>
  <a href="https://github.com/rstudio/blastula" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Send an email message through SMTP</h1>
    <small class="dont-index">Source: <a href="https://github.com/rstudio/blastula/blob/master/R/smtp_send.R" class="external-link"><code>R/smtp_send.R</code></a></small>
    <div class="hidden name"><code>smtp_send.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Send an email message to one or more recipients via an SMTP server. The email
message required as input to <code>smtp_send()</code> has to be created by using the
<code><a href="compose_email.html">compose_email()</a></code> function. The <code>email_message</code> object can be previewed by
printing the object, where the HTML preview will show how the message should
appear in recipients' email clients. File attachments can be added to the
email object by using the <code><a href="add_attachment.html">add_attachment()</a></code> function (one call per
attachment) prior to sending through this function.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">smtp_send</span><span class="op">(</span></span>
<span>  <span class="va">email</span>,</span>
<span>  <span class="va">to</span>,</span>
<span>  <span class="va">from</span>,</span>
<span>  subject <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bcc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  credentials <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  creds_file <span class="op">=</span> <span class="st">"deprecated"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  login_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-email">email<a class="anchor" aria-label="anchor" href="#arg-email"></a></dt>
<dd><p>The email message object, as created by the <code><a href="compose_email.html">compose_email()</a></code>
function. The object's class is <code>email_message</code>.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>A vector of email addresses serving as primary recipients for the
message. For secondary recipients, use the <code>cc</code> and <code>bcc</code> arguments. A
named character vector can be used to specify the recipient names along
with the their email address (e.g., <code>c("Jane Doe" = "jane_doe@example.com")</code>).</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>The email address of the sender. Often this needs to be the same
email address that is associated with the account actually sending the
message. As with <code>to</code>, <code>cc</code>, and <code>bcc</code>, we can either supply a single email
address or use a named character vector with the sender name and email
address (e.g., <code>c("John Doe" = "john_doe@example.com")</code>).</p></dd>


<dt id="arg-subject">subject<a class="anchor" aria-label="anchor" href="#arg-subject"></a></dt>
<dd><p>The subject of the message, which is usually a brief summary
of the topic of the message. If not provided, an empty string will be used
(which is handled differently by email clients).</p></dd>


<dt id="arg-cc-bcc">cc, bcc<a class="anchor" aria-label="anchor" href="#arg-cc-bcc"></a></dt>
<dd><p>A vector of email addresses for sending the message as a carbon
copy or blind carbon copy. The CC list pertains to recipients that are to
receive a copy of a message that is addressed primarily to others. The CC
listing of recipients is visible to all other recipients of the message.
The BCC list differs in that those recipients will be concealed from all
other recipients (including those on the BCC list). A named character
vector can be used to specify the recipient names along with the their
email address (e.g., <code>c("Joe Public" = "joe_public@example.com")</code>).</p></dd>


<dt id="arg-credentials">credentials<a class="anchor" aria-label="anchor" href="#arg-credentials"></a></dt>
<dd><p>One of three credential helper functions must be used
here: (1) <code><a href="credential_helpers.html">creds()</a></code>, (2) <code><a href="credential_helpers.html">creds_key()</a></code>, or (3) <code><a href="credential_helpers.html">creds_file()</a></code>. The first,
<code><a href="credential_helpers.html">creds()</a></code>, allows for a manual specification of SMTP configuration and
credentials within that helper function. This is the most secure method for
supplying credentials as they aren't written to disk. The <code><a href="credential_helpers.html">creds_key()</a></code>
function is used if credentials are stored in the system-wide key-value
store, through use of the <code><a href="create_smtp_creds_key.html">create_smtp_creds_key()</a></code> function. The
<code><a href="credential_helpers.html">creds_file()</a></code> helper function relies on a credentials file stored on disk.
Such a file is created using the <code><a href="create_smtp_creds_file.html">create_smtp_creds_file()</a></code> function.</p></dd>


<dt id="arg-creds-file">creds_file<a class="anchor" aria-label="anchor" href="#arg-creds-file"></a></dt>
<dd><p>An option to specify a credentials file. As this argument
is deprecated, please consider using <code>credentials = creds_file(&lt;file&gt;)</code>
instead.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Should verbose output from the internal curl <code>send_mail()</code>
call be printed? While the username and password will likely be echoed
during the exchange, such information is encoded and won't be stored on
the user's system.</p></dd>


<dt id="arg-login-options">login_options<a class="anchor" aria-label="anchor" href="#arg-login-options"></a></dt>
<dd><p>A string representation of login options allowed by
<a href="https://curl.se/libcurl/c/CURLOPT_LOGIN_OPTIONS.html" class="external-link"><code>CURLOPT_LOGIN_OPTIONS</code></a>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Extra arguments passed to <code><a href="https://rdrr.io/pkg/curl/man/send_mail.html" class="external-link">curl::send_mail()</a></code></p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>We can avoid re-entering SMTP configuration and credentials information by
retrieving this information either from disk (with the file generated by use
of the <code><a href="create_smtp_creds_file.html">create_smtp_creds_file()</a></code> function), or, from the system's key-value
store (with the key set by the <code><a href="create_smtp_creds_key.html">create_smtp_creds_key()</a></code> function).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Before sending out an email through</span></span></span>
<span class="r-in"><span><span class="co"># SMTP, we need an `email_message`</span></span></span>
<span class="r-in"><span><span class="co"># object; for the purpose of a simple</span></span></span>
<span class="r-in"><span><span class="co"># example, we can use the function</span></span></span>
<span class="r-in"><span><span class="co"># `prepare_test_message()` to create</span></span></span>
<span class="r-in"><span><span class="co"># a test version of an email (although</span></span></span>
<span class="r-in"><span><span class="co"># we'd normally use `compose_email()`)</span></span></span>
<span class="r-in"><span><span class="va">email</span> <span class="op">&lt;-</span> <span class="fu"><a href="prepare_test_message.html">prepare_test_message</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The `email` message can be sent</span></span></span>
<span class="r-in"><span><span class="co"># through the `smtp_send()` function</span></span></span>
<span class="r-in"><span><span class="co"># so long as we supply the appropriate</span></span></span>
<span class="r-in"><span><span class="co"># credentials; The following three</span></span></span>
<span class="r-in"><span><span class="co"># examples provide scenarios for both</span></span></span>
<span class="r-in"><span><span class="co"># the creation of credentials and their</span></span></span>
<span class="r-in"><span><span class="co"># retrieval within the `credentials`</span></span></span>
<span class="r-in"><span><span class="co"># argument of `smtp_send()`</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (1) Providing the credentials info</span></span></span>
<span class="r-in"><span><span class="co"># directly via the `creds()` helper</span></span></span>
<span class="r-in"><span><span class="co"># (the most secure means of supplying</span></span></span>
<span class="r-in"><span><span class="co"># credentials information)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># email %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   smtp_send(</span></span></span>
<span class="r-in"><span><span class="co">#     from = "sender@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     to = "recipient@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     credentials = creds(</span></span></span>
<span class="r-in"><span><span class="co">#       provider = "gmail",</span></span></span>
<span class="r-in"><span><span class="co">#       user = "sender@email.com")</span></span></span>
<span class="r-in"><span><span class="co">#   )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (2) Using a credentials key (with</span></span></span>
<span class="r-in"><span><span class="co"># the `create_smtp_creds_key()` and</span></span></span>
<span class="r-in"><span><span class="co"># `creds_key()` functions)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create_smtp_creds_key(</span></span></span>
<span class="r-in"><span><span class="co">#  id = "gmail",</span></span></span>
<span class="r-in"><span><span class="co">#  user = "sender@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#  provider = "gmail"</span></span></span>
<span class="r-in"><span><span class="co">#  )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># email %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   smtp_send(</span></span></span>
<span class="r-in"><span><span class="co">#     from = "sender@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     to = "recipient@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     credentials = creds_key(</span></span></span>
<span class="r-in"><span><span class="co">#       "gmail"</span></span></span>
<span class="r-in"><span><span class="co">#       )</span></span></span>
<span class="r-in"><span><span class="co">#   )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># (3) Using a credentials file (with</span></span></span>
<span class="r-in"><span><span class="co"># the `create_smtp_creds_file()` and</span></span></span>
<span class="r-in"><span><span class="co"># `creds_file()` functions)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create_smtp_creds_file(</span></span></span>
<span class="r-in"><span><span class="co">#  file = "gmail_secret",</span></span></span>
<span class="r-in"><span><span class="co">#  user = "sender@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#  provider = "gmail"</span></span></span>
<span class="r-in"><span><span class="co">#  )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># email %&gt;%</span></span></span>
<span class="r-in"><span><span class="co">#   smtp_send(</span></span></span>
<span class="r-in"><span><span class="co">#     from = "sender@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     to = "recipient@email.com",</span></span></span>
<span class="r-in"><span><span class="co">#     credentials = creds_file(</span></span></span>
<span class="r-in"><span><span class="co">#       "gmail_secret")</span></span></span>
<span class="r-in"><span><span class="co">#   )</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="tidyverse">
  <p>blastula is built for <strong>R Markdown</strong>, an ecosystem of packages for creating computational documents in R. Learn more at <a href="https://rmarkdown.rstudio.com" class="external-link">rmarkdown.rstudio.com</a>.</p>
</div>

<div class="author">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

